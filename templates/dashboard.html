{% extends "base.html" %}

{% block title %}ダッシュボード - クイズサイト{% endblock %}

{% block content %}
<div class="card">
    <h2>ダッシュボード</h2>
    <p>ようこそ、{{ session.username }}さん！</p>
    
    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-number">{{ user_stats.total_answers or 0 }}</div>
            <div>回答数</div>
        </div>
        <div class="stat-card">
            <div class="stat-number">{{ user_stats.correct_answers or 0 }}</div>
            <div>正解数</div>
        </div>
        <div class="stat-card">
            <div class="stat-number">
                {% if user_stats.total_answers and user_stats.total_answers > 0 %}
                    {{ "%.1f"|format((user_stats.correct_answers / user_stats.total_answers * 100)) }}%
                {% else %}
                    0%
                {% endif %}
            </div>
            <div>正解率</div>
        </div>
    </div>
    
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-top: 30px;">
        <a href="{{ url_for('create_quiz') }}" class="btn" style="text-align: center; padding: 20px;">
            📝 クイズを作成
        </a>
        <a href="{{ url_for('take_quiz') }}" class="btn btn-secondary" style="text-align: center; padding: 20px;">
            🎯 クイズに挑戦
        </a>
        <a href="{{ url_for('ranking') }}" class="btn btn-success" style="text-align: center; padding: 20px;">
            🏆 ランキングを見る
        </a>
    </div>
    
    {% if recent_quizzes %}
    <div style="margin-top: 30px;">
        <h3>最新のクイズ</h3>
        {% for quiz in recent_quizzes %}
        <div style="padding: 15px; margin: 10px 0; border-left: 4px solid #667eea; background: rgba(102, 126, 234, 0.05);">
            <strong>{{ quiz.question[:50] }}...</strong>
            <small style="display: block; color: #666;">{{ quiz.category }} | {{ quiz.difficulty }}</small>
        </div>
        {% endfor %}
    </div>
    {% endif %}
</div>
{% endblock %}