{% extends "base.html" %}

{% block title %}クイズ回答 - クイズサイト{% endblock %}

{% block content %}
<div class="card">
    <h2>クイズに挑戦</h2>
    
    <div style="margin-bottom: 20px;">
        <strong>カテゴリ:</strong> {{ quiz.category }} | <strong>難易度:</strong> {{ quiz.difficulty }}
    </div>
    
    <div style="font-size: 1.2em; margin-bottom: 30px; padding: 20px; background: rgba(102, 126, 234, 0.05); border-radius: 10px;">
        {{ quiz.question }}
    </div>
    
    <form method="POST" action="{{ url_for('submit_answer') }}">
        <input type="hidden" name="quiz_id" value="{{ quiz.id }}">
        
        <div class="quiz-choices">
            {% for choice in quiz.choices %}
            <label class="choice">
                <input type="radio" name="selected" value="{{ loop.index0 }}" required style="margin-right: 10px;">
                {{ choice }}
            </label>
            {% endfor %}
        </div>
        
        <div style="text-align: center; margin-top: 30px;">
            <button type="submit" class="btn">回答する</button>
            <a href="{{ url_for('dashboard') }}" class="btn btn-secondary" style="margin-left: 10px;">戻る</a>
        </div>
    </form>
    
    <div style="margin-top: 30px; padding-top: 20px; border-top: 1px solid #eee;">
        <h4>他のカテゴリで挑戦:</h4>
        <div style="margin-top: 10px;">
            {% for category in categories %}
            <a href="{{ url_for('take_quiz', category=category) }}" class="btn btn-secondary" style="margin: 5px; padding: 8px 15px; font-size: 14px;">{{ category }}</a>
            {% endfor %}
        </div>
    </div>
</div>

<script>
// 選択肢のインタラクション
document.querySelectorAll('.choice').forEach(choice => {
    choice.addEventListener('click', function() {
        document.querySelectorAll('.choice').forEach(c => c.classList.remove('selected'));
        this.classList.add('selected');
        this.querySelector('input').checked = true;
    });
});
</script>
{% endblock %}